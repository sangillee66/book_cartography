{
  "hash": "3d472bbc479373b8ee828d1fa9c01c63",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"지도학적 의사소통과 지도화 과정\"\nauthor: Sang-Il Lee\ndate-modified: last-modified\nnumber-sections: true\nformat: \n  html: \n    toc: true\ncode-link: true\ncode-copy: true\nexecute: \n  warning: false\n  error: false\n  freeze: auto\neditor: visual\n---\n\n\n## 개념 규정\n\n## 지도학적 일반화\n\n## 기호화\n\n### 시각 변수\n\n#### 준비 작업\n\n-   필수적인 패키지 불러오기\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(readxl)\nlibrary(sf)\nlibrary(tmap)\nlibrary(rayshader)\n```\n:::\n\n\n-   지리공간데이터 불러오기\n\n\n::: {.cell}\n\n```{.r .cell-code}\nseoul_EMD <- st_read(\n  \"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2021_4Q/SEOUL_EMD_2021_4Q.shp\", options = \"ENCODING=CP949\")\nseoul_EMD_2020 <- st_read(\n  \"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2020_2Q/SEOUL_EMD_2020_2Q.shp\", options = \"ENCODING=CP949\")\nseoul_gu <- st_read(\n  \"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2021_4Q/SEOUL_GU_2021_4Q.shp\", options = \"ENCODING=CP949\")\nseoul_sido <- st_read(\n  \"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2021_4Q/SEOUL_SIDO_2021_4Q.shp\", options = \"ENCODING=CP949\")\n```\n:::\n\n\n-   지도 확인\n\n\n::: {.cell}\n\n```{.r .cell-code}\nqtm(seoul_EMD)\n```\n\n::: {.cell-output-display}\n![](04_cartographic_communication_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n-   1인가구 속성 데이터 불러오기\n\n\n::: {.cell}\n\n```{.r .cell-code}\nhouse_SDGGEMD_2020 <- read_excel(\n  \"D:/My R/Population Geography/3 Population Structure/Housing_Size_2020_Adj.xlsx\", sheet = 1\n  )\nView(house_SDGGEMD_2020)\n```\n:::\n\n\n-   결합하기\n\n\n::: {.cell}\n\n```{.r .cell-code}\nseoul_EMD_2020 <- seoul_EMD_2020 |> \n  mutate(\n    EMD_ID = as.numeric(EMD_ID)\n  )\nmy_df <-seoul_EMD_2020 |> \n  left_join(\n    house_SDGGEMD_2020, join_by(EMD_ID == Code)\n  )\n```\n:::\n\n\n#### 조감고도 perspective heights\n\n-   ggplot2를 이용하여 지도 제작\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- my_df |> \n  ggplot() +\n  geom_sf(\n    aes(fill = House1_p), \n    color = NA, show.legend = FALSE\n    ) +\n  labs(fill = \"% of Single \\n Households\") + \n  scale_fill_viridis_c() +\n  theme(\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank(),\n    panel.background = element_blank()\n  )\nmy_map\n```\n\n::: {.cell-output-display}\n![](04_cartographic_communication_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n-   3D\n\n\n::: {.cell}\n\n```{.r .cell-code}\nplot_gg(my_map, \n        width = 5, height = 4, scale = 300, \n        multicore = TRUE, windowsize = c(1726, 1174), \n        zoom = 0.35, phi = 55, theta = 20, sunangle = 225, fov = 70)\nSys.sleep(0.2)\n```\n:::\n\n\n-   포착\n\n\n::: {.cell}\n\n```{.r .cell-code}\nrender_snapshot(clear = TRUE, file = \"seoul_3d.png\")\n```\n:::\n\n\n#### 색상 hue\n\n-   지도 제작\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(pals)\nmy_map <- my_df |> \n  tm_shape() + \n  tm_polygons(\n    col = \"SGG1_NM\",\n    border.col = \"gray30\", lwd = 0.25, \n    palette = alphabet2(),\n    legend.show = FALSE\n    )\nmy_map\n```\n\n::: {.cell-output-display}\n![](04_cartographic_communication_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n-   저장\n\n\n::: {.cell}\n\n:::\n\n\n#### 명도 value\n\n-   지도 제작\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- my_df |> \n  tm_shape() + \n  tm_polygons(\n    col = \"House1_p\",\n    border.col = \"gray30\", lwd = 0.25, \n    palette = \"Blues\", n = 5,\n    legend.show = FALSE\n    )\nmy_map\n```\n\n::: {.cell-output-display}\n![](04_cartographic_communication_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n-   저장\n\n\n::: {.cell}\n\n:::\n\n\n#### 채도 saturation\n\n-   지도 제작\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsaturation_5 <- c(\n  \"#18C800\", \"#29B216\", \"#379F29\", \"#468B3D\", \"#557850\"\n  )\nmy_map <- my_df |> \n  tm_shape() + \n  tm_polygons(\n    col = \"House1_p\",\n    border.col = \"gray30\", lwd = 0.25, \n    palette = saturation_5, n = 5,\n    legend.show = FALSE\n    )\nmy_map\n```\n\n::: {.cell-output-display}\n![](04_cartographic_communication_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n-   저장\n\n\n::: {.cell}\n\n:::\n\n\n#### 질감 texture\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_df |> \n  ggplot() +\n  geom_sf(\n    aes(fill = House1_p), \n    color = NA, show.legend = FALSE\n    ) +\n  labs(fill = \"% of Single \\n Households\") + \n  scale_fill_viridis_c() +\n  theme(\n    axis.text = element_blank(),\n    axis.ticks = element_blank(),\n    panel.grid = element_blank(),\n    panel.background = element_blank()\n  )\n```\n\n::: {.cell-output-display}\n![](04_cartographic_communication_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "04_cartographic_communication_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}