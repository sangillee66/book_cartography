{
  "hash": "12a33a794a3a292cca3e7a1c1594de76",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"점밀도도\"\nauthor: Sang-Il Lee\ndate-modified: last-modified\nnumber-sections: true\nformat: \n  html: \n    toc: true\ncode-link: true\ncode-copy: true\nexecute: \n  warning: false\n  error: false\n  freeze: auto\neditor: visual\neditor_options: \n  chunk_output_type: console\n---\n\n\n## 기본 개념\n\n### 지도 제작 데이터\n\n-   필수적인 패키지\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse) \nlibrary(readxl) \nlibrary(sf) \nlibrary(tmap)\nlibrary(ggspatial)\n```\n:::\n\n\n-   형상 데이터 불러오기\n\n\n::: {.cell}\n\n```{.r .cell-code}\nsido <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2020_2Q/SIDO_2020_2Q_GEN_0050.shp\", options = \"ENCODING=CP949\")\nsigun1 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2020_2Q/SIGUN1_2020_2Q_GEN_0050.shp\", options = \"ENCODING=CP949\")\nsigungu1 <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2020_2Q/SIGUNGU1_2020_2Q_GEN_0050.shp\", options = \"ENCODING=CP949\")\nemd <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2020_2Q/EMD_2020_2Q_GEN_0050.shp\", options = \"ENCODING=CP949\")\nsido_polyline <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2020_2Q/SIDO_Polyline_2020_2Q_GEN_0050.shp\", options = \"ENCODING=CP949\")\nbbox_ulleung <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2020_2Q/BBOX_Ulleung_2020_2Q_GEN_0050.shp\", options = \"ENCODING=CP949\")\nbbox_seohae <- st_read(\"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/3 Generalization/2020_2Q/BBOX_Seohae3_2020_2Q_GEN_0050.shp\", options = \"ENCODING=CP949\")\nseoul_gu <- st_read(\n  \"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2021_4Q/SEOUL_GU_2021_4Q.shp\", options = \"ENCODING=CP949\"\n  ) \nseoul_sido <- st_read(\n  \"D:/My R/Korean Administrative Areas/행정구역 셰이프 파일/2 Original Cleaning/2021_4Q/SEOUL_SIDO_2021_4Q.shp\", options = \"ENCODING=CP949\"\n  )\n```\n:::\n\n\n### 점밀도도의 기본 원리\n\n#### 단위점의 수치와 크기: 강원도의 사례\n\n-   강원도 형상 데이터\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngangwon_emd <- emd |> \n  filter(SD_CD == 32)\ngangwon_sgg <- sigungu1 |> \n  filter(SD_CD == 32)\n```\n:::\n\n\n-   인구수 속성 데이터 불러오기\n\n\n::: {.cell}\n\n```{.r .cell-code}\npop_SDGGEMD_2020 <- read_excel(\n  \"D:/My R/Korea Census Data Manipulation/1 Population Basic/DM_ADJ_Census_2020.xlsx\", sheet = 1\n  )\n```\n:::\n\n\n-   결합하기\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngangwon_emd_data <- gangwon_emd |> \n  mutate(EMD_ID = as.numeric(EMD_ID)) |> \n  left_join(pop_SDGGEMD_2020, join_by(EMD_ID == Code))\ngangwon_emd_data <- gangwon_emd_data |> \n  mutate(\n    across(where(is.numeric), ~ replace_na(.x, 0))\n  )\n```\n:::\n\n\n-   포인트 생성\n\n\n::: {.cell}\n\n```{.r .cell-code}\ngangwon_point_50 <- gangwon_emd_data |> \n  st_sample(size = round(gangwon_emd_data$pop_t/50), \n            type = \"random\", exact = TRUE) |> \n  st_sf()\ngangwon_point_250 <- gangwon_emd_data |> \n  st_sample(size = round(gangwon_emd_data$pop_t/250), \n            type = \"random\", exact = TRUE) |> \n  st_sf()\ngangwon_point_500 <- gangwon_emd_data |> \n  st_sample(size = round(gangwon_emd_data$pop_t/500), \n            type = \"random\", exact = TRUE) |> \n  st_sf()\n```\n:::\n\n\n-   케이스 1(250, 0.1): 지도 제작\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(gangwon_sgg) + tm_borders() +\n  tm_shape(gangwon_point_250) + \n  tm_dots(size = 0.1, alpha = 0.75, col = \"black\") +\n  tm_layout(\n    title = \"Dot Value: 250\\n Dot Size: 0.10\", title.size = 1.8\n  ) +\n  tm_scale_bar(breaks = seq(0, 50, 10), text.size = 0.4, color.dark = \"gray60\", position = c(0.025, 0.05)) +\n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2024\", size = 0.8, position = c(0.025, 0.01))\nmy_map\n```\n\n::: {.cell-output-display}\n![](12_dot_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n-   케이스 1(250, 0.1): 저장\n\n\n::: {.cell}\n\n:::\n\n\n-   케이스 2(50, 0.05): 지도 제작\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(gangwon_sgg) + tm_borders() +\n  tm_shape(gangwon_point_50) + \n  tm_dots(size = 0.05, alpha = 0.75, col = \"black\") +\n  tm_layout(\n    title = \"Dot Value: 50\\n Dot Size: 0.05\", title.size = 1.8\n  ) +\n  tm_scale_bar(breaks = seq(0, 50, 10), text.size = 0.4, color.dark = \"gray60\", position = c(0.025, 0.05)) +\n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2024\", size = 0.8, position = c(0.025, 0.01))\nmy_map\n```\n\n::: {.cell-output-display}\n![](12_dot_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n-   케이스 2(50, 0.05): 저장\n\n\n::: {.cell}\n\n:::\n\n\n-   케이스 3(500, 0.05): 지도 제작\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(gangwon_sgg) + tm_borders() +\n  tm_shape(gangwon_point_500) + \n  tm_dots(size = 0.05, alpha = 0.75, col = \"black\") +\n  tm_layout(\n    title = \"Dot Value: 500\\n Dot Size: 0.05\", title.size = 1.8\n  ) +\n  tm_scale_bar(breaks = seq(0, 50, 10), text.size = 0.4, color.dark = \"gray60\", position = c(0.025, 0.05)) +\n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2024\", size = 0.8, position = c(0.025, 0.01))\nmy_map\n```\n\n::: {.cell-output-display}\n![](12_dot_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n-   케이스 3(500, 0.05): 저장\n\n\n::: {.cell}\n\n:::\n\n\n-   케이스 4(250, 0.05): 지도 제작\n\n\n::: {.cell}\n\n```{.r .cell-code}\nmy_map <- tm_shape(gangwon_sgg) + tm_borders() +\n  tm_shape(gangwon_point_250) + \n  tm_dots(size = 0.05, alpha = 0.75, col = \"black\") +\n  tm_layout(\n    title = \"Dot Value: 250\\n Dot Size: 0.05\", title.size = 1.8\n  ) +\n  tm_scale_bar(breaks = seq(0, 50, 10), text.size = 0.4, color.dark = \"gray60\", position = c(0.025, 0.05)) +\n  tm_credits(\"SANG-IL LEE, Geography Education at SNU, 2024\", size = 0.8, position = c(0.025, 0.01))\nmy_map\n```\n\n::: {.cell-output-display}\n![](12_dot_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n-   케이스 4(250, 0.05): 저장\n\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "12_dot_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}